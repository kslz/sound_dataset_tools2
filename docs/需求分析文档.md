# 批量语音处理软件需求文档

## 1. 项目概述

本项目旨在开发一款批量语音处理软件，允许用户导入长段语音和字幕，将语音分割为逻辑上的小段，并通过外部接口进行语音评测和发音人识别。软件将提供灵活的优化逻辑和任务队列模块，同时保证扩展性以适应未来的功能扩展。

## 2. 功能需求

### 2.1 数据导入与处理

- 用户可以导入长段语音和字幕，系统将语音分割为小段，每段包含对应文本。
- 用户可以选择应用可选的优化逻辑，例如合并间隔过小的语音段，寻找响度较小的切分位置等。
- 系统支持未来扩展的优化逻辑。

### 2.2 语音评测

- 用户可以调用外部RESTful接口对语音数据进行评测。
- 系统支持接入不同的语音评测接口，记录并存储评测结果。

### 2.3 发音人识别

- 用户可以使用一段音频作为基准进行发音人注册。
- 调用外部RESTful接口进行发音人识别，记录并存储评分结果。

### 2.4 概览页面

- 提供筛选功能，用户可以按发音人、评测得分、语音长度等维度过滤展示的语音数据。
- 展示语音数据以表格形式，包含语音序号、语音文字内容、语音评分等。
- 每行提供操作按钮，允许用户删除、编辑信息、试听、快速导出等操作。

### 2.5 任务队列和后台处理

- 设计任务队列模块，将评测、发音人识别、导出等功能作为后台任务处理。
- 用户可以查看任务状态和结果，保持界面的响应性。

### 2.6 音频文件处理

- 使用ffmpeg-python库简化对音频文件的处理。
- 设计线程池功能，支持并发调用评测和发音人识别接口。

### 2.7 工作区和数据集管理

- 用户在程序启动时选择工作区位置，创建隔离的目录和数据库文件。
- 支持多个数据集，每个数据集隔离语音数据，但共享软件设置和发音人注册信息。

## 3. 非功能需求

### 3.1 扩展性和灵活性

- 系统应支持未来添加新的优化逻辑、语音评测接口和发音人识别接口。

### 3.2 异常处理和日志

- 设计健壮的异常处理机制，保证系统稳定性。
- 实现日志记录功能，追踪和解决潜在问题。

### 3.3 用户友好性

- 界面设计应用户友好，易于使用和导航。
- 提供直观的任务队列和优化逻辑选择界面。

## 4. 技术栈

- 编程语言：Python
- 数据库：SQLite，ORM使用peewee
- 音频处理：ffmpeg-python库
- 图形界面：PySide6

## 5. 限制与假设

- 本项目暂时为本地单人使用，不需要用户认证和权限管理。
- 初始阶段暂不考虑数据库索引问题。
- 具体的界面设计和项目规划将在后续阶段进一步讨论和制定。